/* eslint-disable prettier/prettier */
// 我想把 article/index.tsx 中的 TableSelect 组件抽离出来，放到这里
// 1. 顾名思义，组件有两个重要的组成部分：table 和 select
// 1.1 table 是一个表格，用来展示数据
// 1.2 select 是一个下拉框，用来选择数据
// 1.3 table 和 select 之间有一个关联关系，就是 select 选择的数据会在 table 中展示出来，通过复选框带回，通过value={articleSelectValue}
// 1.4 table 和 select 之间还有一个关联关系，select 的值会影响 table 的展示，比如 select 的值是 1，那么 table 中就勾选 id 为 1 的数据
// 我该怎么定义这个组件呢？
// 2. 首先，我要知道这个组件需要接收哪些参数
// 2.1 open={isArticleSelectOpen} open 是 select 上的属性，用来控制组件的显示和隐藏
// 3. 然后，我要知道这个组件需要返回什么样的内容
// 3.1 我要返回一个组件，这个组件包含 table 和 select
// 3.2 table 由 select 的 dropdownRender 方法返回
// 3.3 table 列的定义 columns={columnsArticle}  数据源 dataSource={tableArticleData} 分页 pagination={paginationArticleInfo}
// 4. 最后，我要知道这个组件需要做哪些事情
// 4.1 onDropdownVisibleChange 时显示下拉框
// 4.2 table 中可以查询，根据教程名称查询
// 4.3 table 中可以选择，选择的数据会通过复选框带回
// 4.4 table 中可以分页，分页的数据会通过分页器带回
// 5. 有了上面的信息，我就可以开始写代码了

import React, { useState } from 'react';
import { Table, Select } from 'antd';

const { Option } = Select;

const TableSelect = ({
  open,
  onDropdownVisibleChange,
  columns,
  dataSource,
  pagination,
  onSelectChange,
}) => {
  const [selectedRowKeys, setSelectedRowKeys] = useState([]);

  const handleSelectChange = (selectedRowKeys) => {
    setSelectedRowKeys(selectedRowKeys);
    onSelectChange(selectedRowKeys);
  };

  const rowSelection = {
    selectedRowKeys,
    onChange: handleSelectChange,
  };

  const dropdownRender = () => (
    <div>
      <Table
        columns={columns}
        dataSource={dataSource}
        pagination={pagination}
        rowSelection={rowSelection}
      />
    </div>
  );

  return (
    <Select
      open={open}
      onDropdownVisibleChange={onDropdownVisibleChange}
      dropdownRender={dropdownRender}
      mode="multiple"
      allowClear
    />
  );
};

export default TableSelect;
